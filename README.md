# ダメージ計算プログラム
ポケモンのダメージ計算を行うプログラムです。Pythonで作成しています。  
未完成ですが、根幹部分はできています。(2022/8/10)

## 開発環境
python 3.9.12  
パッケージ管理:Anaconda  
pandas以外のモジュールを用いていないので、その他環境でも動くと思います。

# 使用方法
calc_damage.pyとassetフォルダ内のcsvファイルを利用します。  
Jupyter Notebookに実際に使用した例を記述しているので、こちらをご覧ください。  
https://github.com/okuokuch/calc_damage_for_pokemon/blob/main/calc_test.ipynb

# クラス図
プログラムのおおよその内容です。
``` mermaid
classDiagram
class 整数変換{
	+四捨五入()
	+五捨五超入()
	+切り捨て()
}

class 補正係数計算{
	+補正係数計算_四捨五入(元値~int~ 補正値~int~)
	+補正係数計算_五捨五超入(元値~int~ 補正値~int~)
	+補正係数計算_切り捨て(元値~int~ 補正値~int~)
}

class データフレーム操作{
	+dfから要素を取り出す()
	+dfにレコードがあるか確認する()
	+条件に合うレコードを取得する(df~pandas~ 検索条件~dict~)
}

class ランク{
	+ランク : int
	+ランク補正値を出力する()
}

class ポケモン{
	+名前 : str
	+レベル : int
	+タイプ : str
	+とくせい : str
	+種族値 : int
	+努力値 : int
	+個体値 : int
	+性格 : str
	+体重技威力 : int
	+ダイマックス : bool
	+特性が有効か:bool
	+ポケモンdfを参照する(タイプ~str~ とくせい~str~ 種族値~str~)
	+ステータス計算(ステータス~int~)
}
class 技{
	+名前: str
	+タイプ : str
	+威力 : int
	+ダイマックス威力 : int
	+カテゴリ : str
	+技範囲:str
	+こぶし技 : bool
	+反動技 : bool
	+追加効果技 : bool
	+直接技 : bool
	+音技 : bool
	+波動技 : bool
	+技dfを参照する(威力~int~ タイプ~str~ 属性~str~ 技種別~bool~)
}
class アイテム{
	+アイテム名 : str
}
class 天候{
	+名前: str
}

class フィールド{
	+名前: str
}

class 壁{
	+名前: str
}

class タイプ補正計算{
	+タイプ一致補正係数 : int
	+タイプ相性係数
	+タイプ一致補正を計算する(タイプ一致補正~int~)
	+タイプ相性補正を計算する(タイプ相性補正~int~)
}

class ダメージ計算{
	+基礎計算
	+急所補正
	+乱数補正
	+最終威力を計算する(最終威力~int~)
	+最終攻撃を計算する(最終攻撃~int~)
	+最終防御を計算する(最終防御~int~)
	+ダメージ補正を計算する(ダメージ補正~int~)
	+ダメージ計算をする(ダメージ~int~)
}

補正係数計算 <|-- 整数変換
ポケモン <|-- 整数変換
ポケモン <|-- データフレーム操作
ポケモン <|-- ランク
アイテム <|-- データフレーム操作
天候 <|-- データフレーム操作
フィールド <|-- データフレーム操作
壁 <|-- データフレーム操作
技 　　　<|-- データフレーム操作
技 　　　<|-- ランク
ダメージ計算 <|-- データフレーム操作

タイプ補正計算 <|-- 補正係数計算
タイプ補正計算 "1"--"2"ポケモン
タイプ補正計算 "1"--"1"技


ダメージ計算"1"--"2..4"ポケモン
ダメージ計算"1"--"0..2"アイテム
ダメージ計算"1"--"1"技
ダメージ計算"1"--"0..1"フィールド
ダメージ計算"1"--"0..1"天候
ダメージ計算"1"--"0..1"壁
ダメージ計算"1"--"1"タイプ補正計算
```

# 今後の更新予定
コード中に変更予定の箇所をコメントアウトで記述しています。
主な改善点は以下です。
- csvファイルの作成と修正
  - move.csvが作成途中
  - poke.csvのポケモン名修正とis_evolvedの作成
- 特殊な技の条件分岐作成
  - ボディプレス、サイコショックなど通常と異なるステータスを参照する技
  - ジャイロボールや草結びなどの威力の参照が通常と異なる技
- エラー対応
  - 変化技を入力するとエラーが出る
